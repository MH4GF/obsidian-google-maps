{
  "version": "1.0.0",
  "features": [
    {
      "id": "package-manager",
      "name": "bun設定",
      "description": "bunをパッケージマネージャーとして設定。npm関連ファイルを削除しbun.lockを生成",
      "category": "foundation",
      "priority": 1,
      "enabled": true,
      "dependsOn": [],
      "acceptanceCriteria": [
        { "type": "command", "command": "bun install", "expectSuccess": true }
      ],
      "passes": true
    },
    {
      "id": "node-version",
      "name": "Node.jsバージョン設定",
      "description": ".node-versionを配置して最新のNode.js LTSバージョンを設定",
      "category": "foundation",
      "priority": 1,
      "enabled": true,
      "dependsOn": [],
      "acceptanceCriteria": [{ "type": "file", "file": ".node-version", "exists": true }],
      "passes": true
    },
    {
      "id": "typescript",
      "name": "TypeScript設定",
      "description": "最もstrictな設定でTypeScriptを書く。@mh4gf/configs/tsconfig/base.jsonを拡張。既存tsconfig.jsonを維持しつつ拡張する形式。bun run allでtypecheckが動くようにする",
      "category": "foundation",
      "priority": 2,
      "enabled": true,
      "dependsOn": ["package-manager"],
      "acceptanceCriteria": [
        { "type": "command", "command": "bun run typecheck", "expectSuccess": true },
        { "type": "command", "command": "bun run all", "expectSuccess": true }
      ],
      "passes": true
    },
    {
      "id": "biome",
      "name": "Biome設定",
      "description": "Biomeをフォーマッター・リンターとして設定。Prettierは使わない。@mh4gf/configs/biomeを拡張。bun run allでformat:checkが動くようにする",
      "category": "code-quality",
      "priority": 3,
      "enabled": true,
      "dependsOn": ["package-manager"],
      "acceptanceCriteria": [
        { "type": "command", "command": "bun run format:check", "expectSuccess": true },
        { "type": "command", "command": "bun run format:fix", "expectSuccess": true },
        { "type": "command", "command": "bun run all", "expectSuccess": true }
      ],
      "passes": true
    },
    {
      "id": "eslint",
      "name": "ESLint設定",
      "description": "ESLint設定。既存のeslint.config.mtsをベースに@mh4gf/eslint-configを拡張。eslint-plugin-obsidianmdとの共存を維持。bun run allでlint:checkが動くようにする",
      "category": "code-quality",
      "priority": 3,
      "enabled": true,
      "dependsOn": ["typescript"],
      "acceptanceCriteria": [
        { "type": "command", "command": "bun run lint:check", "expectSuccess": true },
        { "type": "command", "command": "bun run lint:fix", "expectSuccess": true },
        { "type": "command", "command": "bun run all", "expectSuccess": true }
      ],
      "passes": true
    },
    {
      "id": "knip",
      "name": "Knip設定",
      "description": "未使用コード検出ツールの設定。Obsidianプラグイン特有のエントリポイント設定が必要。bun run allでknip:checkが動くようにする",
      "category": "code-quality",
      "priority": 4,
      "enabled": true,
      "dependsOn": ["typescript"],
      "acceptanceCriteria": [
        { "type": "command", "command": "bun run knip:check", "expectSuccess": true },
        { "type": "command", "command": "bun run knip:fix", "expectSuccess": true },
        { "type": "command", "command": "bun run all", "expectSuccess": true }
      ],
      "passes": true
    },
    {
      "id": "vitest",
      "name": "Vitest設定",
      "description": "テストフレームワークの設定。既にvitestとテストファイルが存在。カバレッジ設定を追加。bun run allでtestが動くようにする",
      "category": "testing",
      "priority": 4,
      "enabled": true,
      "dependsOn": ["typescript"],
      "acceptanceCriteria": [
        { "type": "command", "command": "bun run test", "expectSuccess": true },
        { "type": "command", "command": "bun run test:coverage", "expectSuccess": true },
        { "type": "command", "command": "bun run all", "expectSuccess": true }
      ],
      "passes": true
    },
    {
      "id": "lefthook",
      "name": "Lefthook設定",
      "description": "Gitフックによるpre-commit。bun run allが動くようにする",
      "category": "git-hooks",
      "priority": 5,
      "enabled": true,
      "dependsOn": ["biome", "eslint", "typescript"],
      "acceptanceCriteria": [
        { "type": "file", "file": "lefthook.yml", "exists": true },
        { "type": "command", "command": "lefthook install", "expectSuccess": true }
      ],
      "passes": true
    },
    {
      "id": "github-actions-ci",
      "name": "GitHub Actions CI",
      "description": "CIワークフロー。既存のlint.ymlをci.ymlにリネーム・拡張し、bun run allが成功することを検証する",
      "category": "ci-cd",
      "priority": 6,
      "enabled": true,
      "dependsOn": ["biome", "eslint", "typescript", "knip"],
      "acceptanceCriteria": [
        { "type": "file", "file": ".github/workflows/ci.yml", "exists": true }
      ],
      "passes": true
    },
    {
      "id": "renovate",
      "name": "Renovate設定",
      "description": "依存関係自動更新の設定。config:best-practicesを拡張",
      "category": "ci-cd",
      "priority": 6,
      "enabled": true,
      "dependsOn": ["package-manager"],
      "acceptanceCriteria": [{ "type": "file", "file": "renovate.json5", "exists": true }],
      "passes": true
    },
    {
      "id": "deps-latest",
      "name": "依存パッケージ最新化",
      "description": "初期設定時点で全依存パッケージが最新であることを確認",
      "category": "foundation",
      "priority": 7,
      "enabled": true,
      "dependsOn": ["package-manager"],
      "acceptanceCriteria": [
        { "type": "command", "command": "bun outdated", "expectSuccess": true }
      ],
      "passes": false
    }
  ]
}
